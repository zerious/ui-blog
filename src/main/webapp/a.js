!function(l,u,G,O){function g(){h(m,function(a){a=a.blog.posts;k(a,H);n.posts=a;x("index")})}function x(a){var b=v("body");a=I[a](n,n);B(b,a)}function H(a){var b,c=a.timestamp,c=y(c);b=c.getMonth();var d=c.getDate(),e=c.getFullYear();b++;var e=(""+e).substr(2),f;z.monthDay||(f=b,b=d,d=f);b=f=b+"/"+d+"/"+e;d=y(c);c=+d.getHours();e=+d.getMinutes();d=1;z.twelveHour?11<c?(d=0,12<c&&(c-=12)):c||(c=12):c=9<c?c:"0"+c;c=c+":"+(9<e?e:"0"+e);d=(z.twelveHour&&(c+=d?"am":"pm"),c);b=(f=b+(" "+d),f);a.when=b;a.text=
a.text.replace()}var h=function(a,b,c){p(b)&&(c=b,b=0);var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4===d.readyState){var a=d.status,b=J(d.responseText,b);c(b,a)}};return d.open(b?"POST":null===b?"DELETE":"GET",a,!0),b&&(d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),q(b)||(b=A(b))),d.send(b||null),d},k=function(a,b){if(a){var c,d,e=a.length;if("number"==typeof e||e instanceof Number)for(c=0;e>c&&(d=b(a[c],c,a),0!==d);c++);else for(c in a)if(d=b(a[c],c,a),0===
d)break;return c}},y=function(a){return a instanceof u?a:a?new u(a):new u},K=function(a){return a=y(a),a.toISOString()},L=function(a){var b=a;if(q(a)){var c=a.split("?"),d=c[0].split(".");a=d.slice(1).join(" ");var e=d[0].split("#"),d=e[0]||"div",e=e[1],c=c[1],f=/^(svg|g|path|circle|line)$/.test(d),b=l.createElementNS("http://www.w3.org/"+(f?"2000/svg":"1999/xhtml"),d);e&&(b.id=e);a&&(b.className=a);c&&(c=c.split("&"),k(c,function(a){var c=a.split("=");a=c[0];c=c[1];b[a]=c;D(b,a,c)}))}return b},E=
function(a,b,c){q(a)&&(c=b,b=a,a=l.body);b=L(b);return("number"==typeof c||c instanceof Number)&&(c=a.childNodes[c]),c?a.insertBefore(b,c):a.appendChild(b),b},B=function(a,b){return t(b)||(a.innerHTML=b),a.innerHTML},D=function(a,b,c){if(null===c)a.removeAttribute(b);else if(t(c))c=a.getAttribute(b);else{var d=D(a,b);c!==d&&a.setAttribute(b,c)}return c},M=function(a,b,c){(!b||p(b))&&(c=b,b=a,a=l);a=a.querySelectorAll(b);return c&&k(a,c),a},v=function(a,b,c){(!b||p(b))&&(c=b,b=a,a=l);a=a.querySelector(b);
return a&&c&&c(a),a},F=function(a,b){if(a){var c,d,e,f=a.type[0],r=a.value,C=a.options,g=1<arguments.length;"c"===f||"r"===f?(c=M(a.form||l,"input[name="+a.name+"]"),d="c"===f&&1<c.length,e="checked"):C&&(c=C,d=a.multiple,e="selected");if(c){var h={},f=N(b);k(f,function(a){h[a]=1});r=[];k(c,function(a){var b=!!h[a.value];g?a[e]=b:a[e]&&r.push(a.value)});d||(r=r[0])}else g&&(a.value=b);return g?b:r}},z={months:"January February March April May June July August September October November December".split(" "),
at:"at",monthDay:1,twelveHour:1,fahrenheit:1},A=function(a,b){if(a instanceof u||a&&p(a.toJSON)||q(a))a=JSON.stringify(a);else{if(p(a)||t(a))return b?"null":void 0;if(!a||"object"!=typeof a||a instanceof Boolean||a instanceof Number)a=w(a);else{b=b||[];var c;if(k(b,function(b){b===a&&(c=1)}),c)return'"[Circular '+b.length+']"';b.push(a);var d=a instanceof Array,e=[];k(a,function(a,c){a=A(a,b);e.push(d?a:A(c)+":"+a)});b.pop();a=(d?"[":"{")+e.join(",")+(d?"]":"}")}}return a},J=function(a,b){try{eval("eval.J="+
a),a=eval.J}catch(c){a=b}return a},t=function(a){return"undefined"==typeof a},q=function(a){return"string"==typeof a||a instanceof String},p=function(a){return"function"==typeof a},w=function(a){return q(a)?a:""+a},N=function(a){return a instanceof Array?a:t(a)?[]:[a]},I={$:function(a){return(a||0===a?"object"==typeof a?JSON.stringify(a)||"":""+a:"").replace(/</g,"&lt;")},"&":void 0,edit:function(a,b){return""+this.page({block:function(){function b(a){return(a||0===a?"object"==typeof a?JSON.stringify(a)||
"":""+a:"").replace(/</g,"&lt;")}var d='<form id="edit">';return d+=a.post.id?"<h1>Edit Post</h1>":"<h2>New Post</h2>",d+='<div class="field"><label for="title">Title</label><input id="title" type="text" name="title" value="'+b(a.post.title)+'" style="width:100%"></div><div class="field"><label for="text">Text</label><textarea id="text" name="text" rows="20">'+b(a.post.text)+'</textarea></div><div class="field"><button onclick="blog.update('+a.post.id+');return false">',d+=a.post.id?"Update Post":
"Create Post",d+="</button></div></form>"}},b||a)},index:function(a,b){return""+this.page({block:function(){function b(a){return(a||0===a?"object"==typeof a?JSON.stringify(a)||"":""+a:"").replace(/</g,"&lt;")}for(var d,e="",f=0,g=a.posts.length;g>f;++f)d=a.posts[f],e+='<a name="'+d.id+'"></a><div class="post"><h2>'+b(d.title)+' <i class="when">- '+b(d.when)+"</i></h2>"+d.text+'<p><button onclick="blog.edit('+d.id+')">Edit</button> <button onclick="blog.remove('+d.id+')">Delete</button></p></div>';
return e+='<div class="post"><button onclick="blog.drop()">Delete All</button></div>'}},b||a)},page:function(a,b){var c=this.$,d;a.appName="My Blog";a.posts=(b||a).posts;d="<!DOCTYPE html><html><head><title>"+(a.title?""+c(a.title)+" - "+c(a.appName):""+c(a.appName));d+='</title></head><body><div id="top"><h1><a id="logo" onclick="blog.load()">'+c(a.appName)+'</a></h1></div><div id="side"><h3>Posts</h3>';for(var e,f=0,g=a.posts.length;g>f;++f)e=a.posts[f],d+='<a href="#'+e.id+'">'+c(e.when)+" - "+
c(e.title)+"</a>";return d+('<p><button onclick="blog.edit()">New Post</button></p></div><div id="content">'+a.block.call(this,a)+"</div></body></html>")}},m="/Blog/api/",n={};g();(function(a){var b=v("head"),b=E(b,"style");t(a)||(B(b,""),E(b,l.createTextNode(a),void 0));(b=b.styleSheet)&&(b.cssText=a)})("*{margin:0;border:0;padding:0;font-weight:400;box-sizing:border-box;line-height:1.5;-moz-box-sizing:border-box;tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out}html,body{width:100%;height:100%;overflow-x:hidden}body{-webkit-touch-callout:none;-webkit-text-size-adjust:none;-webkit-overflow-scrolling:touch;-ms-touch-action:none;-ms-content-zooming:none}body,td,th,var,button,input,select,textarea{font-size:16px;font-family:HelveticaNeue,Roboto,Helvetica,'Droid Sans',Arial;font-weight:400;line-height:1.5em;outline:none}a{color:#06c;text-decoration:none;cursor:pointer;outline:none}b{font-weight:600}h1{font-size:24px}h2{font-size:22px}h3{font-size:20px}p{margin:16px 0}::-webkit-input-placeholder{color:#bcd}:-moz-placeholder,::-moz-placeholder{color:#bcd}:-ms-input-placeholder{color:#bcd}#top{background:#0ae;padding:16px}#logo{color:#fff}#side{position:fixed;top:72px;bottom:0;padding:16px;border-right:1px solid #ddd;width:200px;overflow:scroll}#side>a{padding:4px 0}#content{margin-left:220px}#form,.post{padding:16px}.post{display:block;border-bottom:1px solid #eee}.when{color:#789;font-size:16px}.right{float:right}form{display:block;padding:16px}.field{margin:8px 0}button{background:#06c;color:#fff;border-radius:4px;padding:2px 12px}input,textarea,select{border:1px solid #789;padding:2px 4px;margin:2px 0}textarea{width:100%}*[type=hidden]{display:none}");
G.blog={load:g,edit:function(a){return a?void h(m+a,function(a){n.post=a.post;x("edit")}):(n.post={text:"",title:""},x("edit"))},update:function(a){a=a||"";var b=F(v("#title")),c=F(v("#text")),b="title="+encodeURIComponent(w(b))+"&text="+encodeURIComponent(w(c))+"&timestamp"+encodeURIComponent(w(K()));h(m+a,b,function(){g()})},remove:function(a){h(m+a,null,function(){g()})},drop:function(){h(m,null,function(){g()})}}}(document,Date,window,Math)
